function Slider(t,e){if(t){this.sliderContainer=t,this.slider=this.sliderContainer.querySelector(".slides"),this.slideCount=this.slider.children.length,this.currentSlide=1,this.pausetime=e||5e3,this.running,this.mouseover,this.slider.style.width=100*(this.slideCount+1)+"vw",this.createNav(),this.sliderNav=this.sliderContainer.querySelector(".nav");var i=this.slider.children[0].cloneNode(!0);this.slider.appendChild(i),this.sliderContainer.addEventListener("mouseenter",function(){this.mouseover=!0,this.pause()}.bind(this)),this.sliderContainer.addEventListener("mouseleave",function(){this.mouseover=!1,this.run()}.bind(this)),this.sliderNav.addEventListener("click",function(t){this.gotoSlide(parseInt(t.target.closest("li").innerText))}.bind(this)),this.sliderTouch=new Hammer(this.slider),this.sliderTouch.on("swipeleft",function(t){this.currentSlide<this.slideCount&&this.gotoSlide(this.currentSlide+1)}.bind(this)),this.sliderTouch.on("swiperight",function(t){1<this.currentSlide&&this.gotoSlide(this.currentSlide-1)}.bind(this)),this.run()}}function TripsList(t){t&&(this.container=t,this.jsonData)}function Filters(t){t&&(this.container=t,this.container.addEventListener("click",this.sortTripsClick),this.form=this.container.querySelector("form"),this.container.querySelector(".apply .btn").addEventListener("click",this.applyClick.bind(this)),this.container.querySelector(".apply .clear").addEventListener("click",this.clearClick.bind(this)),this.container.querySelector(".selected-filters ul").addEventListener("click",this.selectedFiltersClick.bind(this)),this.container.querySelector(".toggle .btn").addEventListener("click",this.toggle.bind(this)))}function SortingOptions(t){t&&(this.container=t,this.container.addEventListener("click",this.sortTripsClick))}var prevViewportWidth,slider,filters,sortingOptions,trips;function start(){var t=document.getElementById("slider"),e=document.getElementById("sort-options"),i=document.getElementById("filters"),n=document.getElementById("trips");slider=new Slider(t,4e3),sortingOptions=new SortingOptions(e),filters=new Filters(i),(trips=new TripsList(n)).load(),filters.buildSelected(),window.addEventListener("scroll",throttle(handleScroll,250)),window.addEventListener("resize",debounce(handleResize,500)),prevViewportWidth=getViewportWidth()}function handleScroll(){console.log("scroll position: "+window.pageYOffset),filters.stickyApply()}function handleResize(){console.log("viewport width: "+getViewportWidth()),filters.updateFiltersHeight()}function scrollToElement(t,n){var r,s=window.pageYOffset,o=t.offsetTop-s;window.requestAnimationFrame(function step(t){r||(r=t);var e=t-r,i=Math.min(e/n,1);window.scrollTo(0,s+o*i),e<n&&window.requestAnimationFrame(step)})}function getViewportWidth(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}function getViewportHeight(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}function throttle(t,e){var i=!1;return function(){i||(t.call(),i=!0,setTimeout(function(){i=!1},e))}}function debounce(t,e){var i;return function(){clearTimeout(i),i=setTimeout(function(){t.call()},e)}}!function(a,c,d,U){"use strict";function e(t,e,i){return setTimeout(j(t,i),e)}function f(t,e,i){return!!Array.isArray(t)&&(g(t,i[e],i),!0)}function g(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==U)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function h(n,t,e){var r="DEPRECATED METHOD: "+t+"\n"+e+" AT \n";return function(){var t=new Error("get-stack-trace"),e=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=a.console&&(a.console.warn||a.console.log);return i&&i.call(a.console,r,e),n.apply(this,arguments)}}function i(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&tt(n,i)}function j(t,e){return function(){return t.apply(e,arguments)}}function k(t,e){return typeof t==nt?t.apply(e&&e[0]||U,e):t}function l(t,e){return t===U?e:t}function m(e,t,i){g(q(t),function(t){e.addEventListener(t,i,!1)})}function n(e,t,i){g(q(t),function(t){e.removeEventListener(t,i,!1)})}function o(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function p(t,e){return-1<t.indexOf(e)}function q(t){return t.trim().split(/\s+/g)}function r(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function s(t){return Array.prototype.slice.call(t,0)}function t(t,i,e){for(var n=[],s=[],o=0;o<t.length;){var a=i?t[o][i]:t[o];r(s,a)<0&&n.push(t[o]),s[o]=a,o++}return e&&(n=i?n.sort(function(t,e){return t[i]>e[i]}):n.sort()),n}function u(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),s=0;s<et.length;){if((n=(i=et[s])?i+r:e)in t)return n;s++}return U}function w(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||a}function x(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){k(e.options.enable,[e])&&i.handler(t)},this.init()}function z(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,s=e&vt&&n-r==0,a=e&(gt|yt)&&n-r==0;i.isFirst=!!s,i.isFinal=!!a,s&&(t.session={}),i.eventType=e,function A(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=D(e)),1<r&&!i.firstMultiple?i.firstMultiple=D(e):1===r&&(i.firstMultiple=!1);var s=i.firstInput,a=i.firstMultiple,l=a?a.center:s.center,c=e.center=E(n);e.timeStamp=ot(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=I(l,c),e.distance=H(l,c),function B(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==vt&&s.eventType!==gt||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=G(e.deltaX,e.deltaY);var u=F(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=st(u.x)>st(u.y)?u.x:u.y,e.scale=a?function K(t,e){return H(e[0],e[1],Nt)/H(t[0],t[1],Nt)}(a.pointers,n):1,e.rotation=a?function J(t,e){return I(e[1],e[0],Nt)+I(t[1],t[0],Nt)}(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function C(t,e){var i,n,r,s,o=t.lastInterval||e,a=e.timeStamp-o.timeStamp;if(e.eventType!=yt&&(mt<a||o.velocity===U)){var l=e.deltaX-o.deltaX,c=e.deltaY-o.deltaY,u=F(a,l,c);n=u.x,r=u.y,i=st(u.x)>st(u.y)?u.x:u.y,s=G(l,c),t.lastInterval=e}else i=o.velocity,n=o.velocityX,r=o.velocityY,s=o.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=s}(i,e);var h=t.element;o(e.srcEvent.target,h)&&(h=e.srcEvent.target),e.target=h}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function D(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:rt(t.pointers[i].clientX),clientY:rt(t.pointers[i].clientY)},i++;return{timeStamp:ot(),pointers:e,center:E(e),deltaX:t.deltaX,deltaY:t.deltaY}}function E(t){var e=t.length;if(1===e)return{x:rt(t[0].clientX),y:rt(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:rt(i/e),y:rt(n/e)}}function F(t,e,i){return{x:e/t||0,y:i/t||0}}function G(t,e){return t===e?Tt:st(t)>=st(e)?t<0?Et:bt:e<0?Ct:St}function H(t,e,i){i||(i=xt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function I(t,e,i){i||(i=xt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function L(){this.evEl=It,this.evWin=_t,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Ft,this.evWin=Ot,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,x.apply(this,arguments)}function P(){this.evTarget=Pt,this.targetIds={},x.apply(this,arguments)}function R(){x.apply(this,arguments);var t=j(this.handler,this);this.touch=new P(this.manager,t),this.mouse=new L(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function T(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);-1<t&&n.splice(t,1)},Rt)}}function V(t,e){this.manager=t,this.set(e)}function Y(t){this.options=tt({},this.defaults,t||{}),this.id=function v(){return ct++}(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=$t,this.simultaneous={},this.requireFail=[]}function Z(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function $(t){return t==St?"down":t==Ct?"up":t==Et?"left":t==bt?"right":""}function _(t,e){var i=e.manager;return i?i.get(t):t}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(t,e){return(e=e||{}).recognizers=l(e.recognizers,ha.defaults.preset),new ia(t,e)}function ia(t,e){this.options=tt({},ha.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function y(t){var e=t.options.inputClass;return new(e||(ht?M:dt?P:ut?R:L))(t,z)}(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ja(i,n){var r,s=i.element;s.style&&(g(i.options.cssProps,function(t,e){r=u(s.style,e),s.style[r]=n?(i.oldCssProps[r]=s.style[r],t):i.oldCssProps[r]||""}),n||(i.oldCssProps={}))}var tt,et=["","webkit","Moz","MS","ms","o"],it=c.createElement("div"),nt="function",rt=Math.round,st=Math.abs,ot=Date.now;tt="function"!=typeof Object.assign?function(t){if(t===U||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==U&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var at=h(function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===U)&&(t[n[r]]=e[n[r]]),r++;return t},"extend","Use `assign`."),lt=h(function(t,e){return at(t,e,!0)},"merge","Use `assign`."),ct=1,ut="ontouchstart"in a,ht=u(a,"PointerEvent")!==U,dt=ut&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),pt="touch",ft="mouse",mt=25,vt=1,gt=4,yt=8,Tt=1,Et=2,bt=4,Ct=8,St=16,At=Et|bt,wt=Ct|St,zt=At|wt,xt=["x","y"],Nt=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Lt={mousedown:vt,mousemove:2,mouseup:gt},It="mousedown",_t="mousemove mouseup";i(L,x,{handler:function(t){var e=Lt[t.type];e&vt&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=gt),this.pressed&&(e&gt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:ft,srcEvent:t}))}});var Dt={pointerdown:vt,pointermove:2,pointerup:gt,pointercancel:yt,pointerout:yt},Mt={2:pt,3:"pen",4:ft,5:"kinect"},Ft="pointerdown",Ot="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Ft="MSPointerDown",Ot="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=Dt[n],o=Mt[t.pointerType]||t.pointerType,a=o==pt,l=r(e,t.pointerId,"pointerId");s&vt&&(0===t.button||a)?l<0&&(e.push(t),l=e.length-1):s&(gt|yt)&&(i=!0),l<0||(e[l]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(l,1))}});var kt={touchstart:vt,touchmove:2,touchend:gt,touchcancel:yt};i(N,x,{handler:function(e){var i=kt[e.type];if(i===vt&&(this.started=!0),this.started){var n=function O(e,i){var n=s(e.touches),r=s(e.changedTouches);return i&(gt|yt)&&(n=t(n.concat(r),"identifier",!0)),[n,r]}.call(this,e,i);i&(gt|yt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:n[0],changedPointers:n[1],pointerType:pt,srcEvent:e})}}});var qt={touchstart:vt,touchmove:2,touchend:gt,touchcancel:yt},Pt="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(e){var i=qt[e.type],n=function Q(e,i){var n=s(e.touches),r=this.targetIds;if(i&(2|vt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var a,l,c=s(e.changedTouches),u=[],h=this.target;if(l=n.filter(function(t){return o(t.target,h)}),i===vt)for(a=0;a<l.length;)r[l[a].identifier]=!0,a++;for(a=0;a<c.length;)r[c[a].identifier]&&u.push(c[a]),i&(gt|yt)&&delete r[c[a].identifier],a++;return u.length?[t(l.concat(u),"identifier",!0),u]:void 0}.call(this,e,i);n&&this.callback(this.manager,i,{pointers:n[0],changedPointers:n[1],pointerType:pt,srcEvent:e})}});var Rt=2500;i(R,x,{handler:function(t,e,i){var n=i.pointerType==pt,r=i.pointerType==ft;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function S(t,e){t&vt?(this.primaryTouch=e.changedPointers[0].identifier,T.call(this,e)):t&(gt|yt)&&T.call(this,e)}).call(this,e,i);else if(r&&function U(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=25&&o<=25)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Wt=u(it.style,"touchAction"),Ht=Wt!==U,Yt="compute",jt="manipulation",Vt="none",Xt="pan-x",Bt="pan-y",Ut=function X(){if(!Ht)return!1;var e={},i=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){e[t]=!i||a.CSS.supports("touch-action",t)}),e}();V.prototype={set:function(t){t==Yt&&(t=this.compute()),Ht&&this.manager.element.style&&Ut[t]&&(this.manager.element.style[Wt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,function(t){k(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function W(t){if(p(t,Vt))return Vt;var e=p(t,Xt),i=p(t,Bt);return e&&i?Vt:e||i?e?Xt:Bt:p(t,jt)?jt:"auto"}(e.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(!this.manager.session.prevented){var n=this.actions,r=p(n,Vt)&&!Ut[Vt],s=p(n,Bt)&&!Ut[Bt],o=p(n,Xt)&&!Ut[Xt];if(r){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}return o&&s?void 0:r||s&&i&At||o&&i&wt?this.preventSrc(e):void 0}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var $t=1;Y.prototype={defaults:{},set:function(t){return tt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=_(t,this)).id]||(e[t.id]=t).recognizeWith(this),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)||(t=_(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===r(e,t=_(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=_(t,this);var e=r(this.requireFail,t);return-1<e&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(e){function b(t){i.manager.emit(t,e)}var i=this,t=this.state;t<8&&b(i.options.event+Z(t)),b(i.options.event),e.additionalEvent&&b(e.additionalEvent),8<=t&&b(i.options.event+Z(t))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|$t)))return!1;t++}return!0},recognize:function(t){var e=tt({},t);return k(this.options.enable,[this,e])?(56&this.state&&(this.state=$t),this.state=this.process(e),void(30&this.state&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(t){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,r=this.attrTest(t);return n&&(i&yt||!r)?16|e:n||r?i&gt?8|e:2&e?4|e:2:32}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:zt},getTouchAction:function(){var t=this.options.direction,e=[];return t&At&&e.push(Bt),t&wt&&e.push(Xt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(n=e.direction&At?(r=0===s?Tt:s<0?Et:bt,i=s!=this.pX,Math.abs(t.deltaX)):(r=0===o?Tt:o<0?Ct:St,i=o!=this.pY,Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return aa.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=$(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Vt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var i=this.options,n=t.pointers.length===i.pointers,r=t.distance<i.threshold,s=t.deltaTime>i.time;if(this._input=t,!r||!n||t.eventType&(gt|yt)&&!s)this.reset();else if(t.eventType&vt)this.reset(),this._timer=e(function(){this.state=8,this.tryEmit()},i.time,this);else if(t.eventType&gt)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&gt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ot(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Vt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:At|wt,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(At|wt)?e=t.overallVelocity:i&At?e=t.overallVelocityX:i&wt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&st(e)>this.options.velocity&&t.eventType&gt},emit:function(t){var e=$(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[jt]},process:function(t){var i=this.options,n=t.pointers.length===i.pointers,r=t.distance<i.threshold,s=t.deltaTime<i.time;if(this.reset(),t.eventType&vt&&0===this.count)return this.failTimeout();if(r&&s&&n){if(t.eventType!=gt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<i.interval,a=!this.pCenter||H(this.pCenter,t.center)<i.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%i.taps)return this.hasRequireFailures()?(this._timer=e(function(){this.state=8,this.tryEmit()},i.interval,this),2):8}return 32},failTimeout:function(){return this._timer=e(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:Yt,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:At}],[ba,{direction:At},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ia.prototype={set:function(t){return tt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&14&i.state&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof Y)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),(t.manager=this).touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=r(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==U&&e!==U){var i=this.handlers;return g(q(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==U){var i=this.handlers;return g(q(t),function(t){e?i[t]&&i[t].splice(r(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function ka(t,e){var i=c.createEvent("Event");i.initEvent(t,!0,!0),(i.gesture=e).target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},tt(ha,{INPUT_START:vt,INPUT_MOVE:2,INPUT_END:gt,INPUT_CANCEL:yt,STATE_POSSIBLE:$t,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Tt,DIRECTION_LEFT:Et,DIRECTION_RIGHT:bt,DIRECTION_UP:Ct,DIRECTION_DOWN:St,DIRECTION_HORIZONTAL:At,DIRECTION_VERTICAL:wt,DIRECTION_ALL:zt,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:lt,extend:at,assign:tt,inherit:i,bindFn:j,prefixed:u}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a.Hammer=ha}(window,document),function(t,e){var i=function l(n,p){"use strict";var f,m;if(function(){var t,e={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in m=n.lazySizesConfig||n.lazysizesConfig||{},e)t in m||(m[t]=e[t])}(),!p||!p.getElementsByClassName)return{init:function(){},cfg:m,noSupport:!0};var v=p.documentElement,s=n.Date,r=n.HTMLPictureElement,o="addEventListener",g="getAttribute",t=n[o],h=n.setTimeout,i=n.requestAnimationFrame||h,a=n.requestIdleCallback,d=/^picture$/i,c=["load","error","lazyincluded","_lazyloaded"],u={},y=Array.prototype.forEach,T=function(t,e){return u[e]||(u[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),u[e].test(t[g]("class")||"")&&u[e]},E=function(t,e){T(t,e)||t.setAttribute("class",(t[g]("class")||"").trim()+" "+e)},b=function(t,e){var i;(i=T(t,e))&&t.setAttribute("class",(t[g]("class")||"").replace(i," "))},C=function(e,i,t){var n=t?o:"removeEventListener";t&&C(e,i),c.forEach(function(t){e[n](t,i)})},S=function(t,e,i,n,r){var s=p.createEvent("Event");return i||(i={}),i.instance=f,s.initEvent(e,!n,!r),s.detail=i,t.dispatchEvent(s),s},A=function(t,e){var i;!r&&(i=n.picturefill||m.pf)?(e&&e.src&&!t[g]("srcset")&&t.setAttribute("srcset",e.src),i({reevaluate:!0,elements:[t]})):e&&e.src&&(t.src=e.src)},w=function(t,e){return(getComputedStyle(t,null)||{})[e]},z=function(t,e,i){for(i=i||t.offsetWidth;i<m.minSize&&e&&!t._lazysizesWidth;)i=e.offsetWidth,e=e.parentNode;return i},x=(St=[],At=[],wt=St,zt=function(){var t=wt;for(wt=St.length?At:St,Ct=!(bt=!0);t.length;)t.shift()();bt=!1},xt=function(t,e){bt&&!e?t.apply(this,arguments):(wt.push(t),Ct||(Ct=!0,(p.hidden?h:i)(zt)))},xt._lsFlush=zt,xt),e=function(i,t){return t?function(){x(i)}:function(){var t=this,e=arguments;x(function(){i.apply(t,e)})}},N=function(t){var e,i,n=function(){e=null,t()},r=function(){var t=s.now()-i;t<99?h(r,99-t):(a||n)(n)};return function(){i=s.now(),e||(e=h(r,99))}},L=(et=/^img$/i,it=/^iframe$/i,nt="onscroll"in n&&!/(gle|ing)bot/.test(navigator.userAgent),rt=0,st=0,ot=-1,at=function(t){st--,(!t||st<0||!t.target)&&(st=0)},lt=function(t){return null==U&&(U="hidden"==w(p.body,"visibility")),U||"hidden"!=w(t.parentNode,"visibility")&&"hidden"!=w(t,"visibility")},ct=function(t,e){var i,n=t,r=lt(t);for(j-=e,B+=e,V-=e,X+=e;r&&(n=n.offsetParent)&&n!=p.body&&n!=v;)(r=0<(w(n,"opacity")||1))&&"visible"!=w(n,"overflow")&&(i=n.getBoundingClientRect(),r=X>i.left&&V<i.right&&B>i.top-1&&j<i.bottom+1);return r},ut=function(){var t,e,i,n,r,s,o,a,l,c,u,h,d=f.elements;if((R=m.loadMode)&&st<8&&(t=d.length)){for(e=0,ot++;e<t;e++)if(d[e]&&!d[e]._lazyRace)if(!nt||f.prematureUnveil&&f.prematureUnveil(d[e]))gt(d[e]);else if((a=d[e][g]("data-expand"))&&(s=1*a)||(s=rt),c||(c=!m.expand||m.expand<1?500<v.clientHeight&&500<v.clientWidth?500:370:m.expand,f._defEx=c,u=c*m.expFactor,h=m.hFac,U=null,rt<u&&st<1&&2<ot&&2<R&&!p.hidden?(rt=u,ot=0):rt=1<R&&1<ot&&st<6?c:0),l!==s&&(H=innerWidth+s*h,Y=innerHeight+s,o=-1*s,l=s),i=d[e].getBoundingClientRect(),(B=i.bottom)>=o&&(j=i.top)<=Y&&(X=i.right)>=o*h&&(V=i.left)<=H&&(B||X||V||j)&&(m.loadHidden||lt(d[e]))&&(q&&st<3&&!a&&(R<3||ot<4)||ct(d[e],s))){if(gt(d[e]),r=!0,9<st)break}else!r&&q&&!n&&st<4&&ot<4&&2<R&&(k[0]||m.preloadAfterLoad)&&(k[0]||!a&&(B||X||V||j||"auto"!=d[e][g](m.sizesAttr)))&&(n=k[0]||d[e]);n&&!r&&gt(n)}},$=ut,J=0,Z=m.throttleDelay,K=m.ricTimeout,Q=function(){G=!1,J=s.now(),$()},tt=a&&49<K?function(){a(Q,{timeout:K}),K!==m.ricTimeout&&(K=m.ricTimeout)}:e(function(){h(Q)},!0),ht=function(t){var e;(t=!0===t)&&(K=33),G||(G=!0,(e=Z-(s.now()-J))<0&&(e=0),t||e<9?tt():h(tt,e))},dt=function(t){var e=t.target;e._lazyCache?delete e._lazyCache:(at(t),E(e,m.loadedClass),b(e,m.loadingClass),C(e,ft),S(e,"lazyloaded"))},pt=e(dt),ft=function(t){pt({target:t.target})},mt=function(t){var e,i=t[g](m.srcsetAttr);(e=m.customMedia[t[g]("data-media")||t[g]("media")])&&t.setAttribute("media",e),i&&t.setAttribute("srcset",i)},vt=e(function(e,t,i,n,r){var s,o,a,l,c,u;(c=S(e,"lazybeforeunveil",t)).defaultPrevented||(n&&(i?E(e,m.autosizesClass):e.setAttribute("sizes",n)),o=e[g](m.srcsetAttr),s=e[g](m.srcAttr),r&&(a=e.parentNode,l=a&&d.test(a.nodeName||"")),u=t.firesLoad||"src"in e&&(o||s||l),c={target:e},E(e,m.loadingClass),u&&(clearTimeout(P),P=h(at,2500),C(e,ft,!0)),l&&y.call(a.getElementsByTagName("source"),mt),o?e.setAttribute("srcset",o):s&&!l&&(it.test(e.nodeName)?function(e,i){try{e.contentWindow.location.replace(i)}catch(t){e.src=i}}(e,s):e.src=s),r&&(o||l)&&A(e,{src:s})),e._lazyRace&&delete e._lazyRace,b(e,m.lazyClass),x(function(){var t=e.complete&&1<e.naturalWidth;u&&!t||(t&&E(e,"ls-is-cached"),dt(c),e._lazyCache=!0,h(function(){"_lazyCache"in e&&delete e._lazyCache},9)),"lazy"==e.loading&&st--},!0)}),gt=function(t){if(!t._lazyRace){var e,i=et.test(t.nodeName),n=i&&(t[g](m.sizesAttr)||t[g]("sizes")),r="auto"==n;(!r&&q||!i||!t[g]("src")&&!t.srcset||t.complete||T(t,m.errorClass)||!T(t,m.lazyClass))&&(e=S(t,"lazyunveilread").detail,r&&I.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,st++,vt(t,e,r,n,i))}},yt=N(function(){m.loadMode=3,ht()}),Tt=function(){3==m.loadMode&&(m.loadMode=2),yt()},Et=function(){q||(s.now()-W<999?h(Et,999):(q=!0,m.loadMode=3,ht(),t("scroll",Tt,!0)))},{_:function(){W=s.now(),f.elements=p.getElementsByClassName(m.lazyClass),k=p.getElementsByClassName(m.lazyClass+" "+m.preloadClass),t("scroll",ht,!0),t("resize",ht,!0),n.MutationObserver?new MutationObserver(ht).observe(v,{childList:!0,subtree:!0,attributes:!0}):(v[o]("DOMNodeInserted",ht,!0),v[o]("DOMAttrModified",ht,!0),setInterval(ht,999)),t("hashchange",ht,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(t){p[o](t,ht,!0)}),/d$|^c/.test(p.readyState)?Et():(t("load",Et),p[o]("DOMContentLoaded",ht),h(Et,2e4)),f.elements.length?(ut(),x._lsFlush()):ht()},checkElems:ht,unveil:gt,_aLSL:Tt}),I=(M=e(function(t,e,i,n){var r,s,o;if(t._lazysizesWidth=n,n+="px",t.setAttribute("sizes",n),d.test(e.nodeName||""))for(r=e.getElementsByTagName("source"),s=0,o=r.length;s<o;s++)r[s].setAttribute("sizes",n);i.detail.dataAttr||A(t,i.detail)}),F=function(t,e,i){var n,r=t.parentNode;r&&(i=z(t,r,i),(n=S(t,"lazybeforesizes",{width:i,dataAttr:!!e})).defaultPrevented||(i=n.detail.width)&&i!==t._lazysizesWidth&&M(t,r,n,i))},O=N(function(){var t,e=D.length;if(e)for(t=0;t<e;t++)F(D[t])}),{_:function(){D=p.getElementsByClassName(m.autosizesClass),t("resize",O)},checkElems:O,updateElem:F}),_=function(){!_.i&&p.getElementsByClassName&&(_.i=!0,I._(),L._())};var D,M,F,O;var k,q,P,R,W,H,Y,j,V,X,B,U,$,G,J,Z,K,Q,tt,et,it,nt,rt,st,ot,at,lt,ct,ut,ht,dt,pt,ft,mt,vt,gt,yt,Tt,Et;var bt,Ct,St,At,wt,zt,xt;return h(function(){m.init&&_()}),f={cfg:m,autoSizer:I,loader:L,init:_,uP:A,aC:E,rC:b,hC:T,fire:S,gW:z,rAF:x}}(t,t.document);t.lazySizes=i,"object"==typeof module&&module.exports&&(module.exports=i)}("undefined"!=typeof window?window:{}),Slider.prototype.createNav=function(){var r=document.createElement("ul");r.classList.add("nav"),Array.prototype.forEach.call(this.slider.children,function(t,e){var i=document.createElement("li"),n=document.createElement("a");n.setAttribute("href","javascript:;"),n.innerText=e+1,0===e&&i.classList.add("active"),i.appendChild(n),r.appendChild(i)}),this.sliderContainer.appendChild(r)},Slider.prototype.run=function(){this.running=setInterval(function(){this.gotoSlide(this.currentSlide+1)}.bind(this),this.pausetime)},Slider.prototype.pause=function(){clearInterval(this.running)},Slider.prototype.gotoSlide=function(t){this.slider.style.marginLeft=100*-t+100+"vw";var e=this.sliderNav.querySelector("li.active");e&&e.classList.remove("active");var i=this.sliderNav.querySelector("li:nth-child("+t+")");i||(i=this.sliderNav.querySelector("li:first-child")),i.classList.add("active"),t>this.slideCount?(clearInterval(this.running),setTimeout(function(){this.currentSlide=1,this.slider.classList.add("notrans"),this.slider.style.marginLeft="0vw",this.mouseover||this.run(),setTimeout(function(){this.slider.classList.remove("notrans")}.bind(this),100)}.bind(this),500)):this.currentSlide=t},TripsList.prototype.load=function(){var t=this.container.getAttribute("data-json-src");this.loadJSON(t)},TripsList.prototype.loadJSON=function(t){var e=this,i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=function(){if(200<=this.status&&this.status<400)try{e.jsonData=JSON.parse(this.response),e.build.apply(e)}catch(t){e.jsonData="Failed to load JSON file: syntax error",e.build.apply(e)}else e.jsonData="Failed to load JSON file: server error",e.build.apply(e)},i.onerror=function(){e.jsonData="Failed to load JSON file: request failed",e.build.apply(e)},i.send()},TripsList.prototype.build=function(){console.time("buildTrips");var i=sortingOptions.getSelected(),e=filters.getSelected();if(this.container.innerHTML="",this.container.classList.add("loading"),"string"==typeof this.jsonData)return this.container.classList.remove("loading"),void(this.container.innerHTML='<li class="alert">'+this.jsonData+"</li>");var t=this.jsonData.trips;t.sort(function(t,e){switch(i){case"startdate":return t[i]-e[i];default:return-(t[i]-e[i])}});var n=document.createDocumentFragment();t.forEach(function(t){0!==e.length&&-1==e.indexOf(t.country.toUpperCase())||n.appendChild(this.createItem(t))}.bind(this)),0<n.childElementCount?this.container.appendChild(n):this.container.innerHTML='<li class="alert">We\'re sorry! No trips are matching selected criteria. Please broaden your filters.</li>',this.container.classList.remove("loading"),console.timeEnd("buildTrips")},TripsList.prototype.createItem=function(t){var e=document.createElement("li"),i=document.createElement("a"),n=document.createElement("div"),r=document.createElement("img");i.appendChild(n).appendChild(r);var s=document.createElement("div"),o=document.createElement("h2");s.appendChild(o);var a=document.createElement("div");s.appendChild(a);var l=document.createElement("div");s.appendChild(l),i.appendChild(s);var c=document.createElement("div"),u=document.createElement("span");return i.appendChild(c).appendChild(u),e.appendChild(i),e.setAttribute("data-startdate",t.startdate),e.setAttribute("data-popularity",t.popularity),i.setAttribute("href",t.link),n.setAttribute("class","image"),r.setAttribute("data-src","img/optimized/"+t.images.small),r.setAttribute("class","lazyload"),r.setAttribute("alt",""),s.setAttribute("class","data"),o.innerText=t.title,a.setAttribute("class","country"),a.innerText=t.country,l.setAttribute("class","date"),l.innerText=t.date,c.setAttribute("class","button"),u.setAttribute("class","btn btn-small"),u.innerText="Details",e},Filters.prototype.buildSelected=function(){console.time("buildSelected");var e=this,t=this.getSelected(),i=this.container.querySelector(".selected-filters"),n=i.querySelector("ul"),r=document.createDocumentFragment();t.forEach(function(t){r.appendChild(e.createSelectedItem(t))}),n.innerText="",n.appendChild(r),i.style.display=0<t.length?"block":"none",console.timeEnd("buildSelected")},Filters.prototype.createSelectedItem=function(t){var e=document.createElement("li");e.innerText=t.toLowerCase();var i=document.createElement("a");i.setAttribute("href","javascript:;");var n=document.createElement("span"),r=document.createElement("span");return i.appendChild(n),i.appendChild(r),e.appendChild(i),e},Filters.prototype.getSelected=function(){var e=[],t=this.container.querySelectorAll("input[type=checkbox]:checked");return Array.prototype.forEach.call(t,function(t){e.push(t.value.toUpperCase())}),e},Filters.prototype.selectedFiltersClick=function(t){if("A"===t.target.tagName||"A"===t.target.parentNode.tagName){var e="A"===t.target.tagName?t.target.parentNode:t.target.parentNode.parentNode;this.form.querySelector('input[value="'+e.innerText.trim()+'"]').checked=!1,e.remove(),0===this.getSelected().length&&(this.container.querySelector(".selected-filters").style.display="none"),trips.load()}},Filters.prototype.applyClick=function(t){t.preventDefault(),this.buildSelected(),trips.load(),scrollToElement(document.querySelector("main"),400)},Filters.prototype.clearClick=function(t){t.preventDefault();var e=this.container.querySelectorAll('input[type="checkbox"]:checked');Array.prototype.forEach.call(e,function(t){t.checked=!1}),this.buildSelected(),trips.load(),scrollToElement(document.querySelector("main"),400)},Filters.prototype.stickyApply=function(){var t=this.form.querySelector(".apply"),e=this.form.offsetTop,i=this.form.scrollHeight,n=window.pageYOffset,r=getViewportHeight();e+t.scrollHeight+100<n+r&&n+r<e+i?t.classList.add("sticky"):t.classList.remove("sticky")},Filters.prototype.updateFiltersHeight=function(){var t=getViewportWidth();t<1024&&1024<=prevViewportWidth?(this.form.style.height=0,this.form.classList.remove("expanded"),this.container.querySelector(".toggle .btn").innerText="Show filters"):t<768&&768<=prevViewportWidth?0<parseInt(this.form.style.height)&&(this.form.style.height="",setTimeout(function(){this.form.style.height=this.form.scrollHeight+"px"}.bind(this),250)):768<=t&&prevViewportWidth<768?0<parseInt(this.form.style.height)&&(this.form.style.height="",setTimeout(function(){this.form.style.height=this.form.scrollHeight+"px"}.bind(this),250)):1024<=t&&prevViewportWidth<1024&&(this.form.style.height=""),prevViewportWidth=t},Filters.prototype.toggle=function(){var t=this.container.querySelector(".toggle .btn");this.form.classList.contains("expanded")?(this.form.style.height="0",this.form.classList.remove("expanded"),t.innerText="Show filters"):(this.form.style.height=this.form.scrollHeight+"px",this.form.classList.add("expanded"),t.innerText="Hide filters")},SortingOptions.prototype.getSelected=function(){return this.container.querySelector(".active").getAttribute("data-sort")},SortingOptions.prototype.sortTripsClick=function(t){if("A"===t.target.tagName||"A"===t.target.parentNode.tagName){var e="A"===t.target.tagName?t.target:t.target.parentNode;Array.prototype.forEach.call(e.parentNode.children,function(t){t.classList.remove("active")}),e.classList.add("active"),trips.load()}},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?start():document.addEventListener("DOMContentLoaded",start);